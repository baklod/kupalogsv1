<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JM Zorilla Noodle Factory - Inventory Management</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary-red: #dc3545;
        --light-red: #f8d7da;
        --dark-red: #b02a37;
      }

      body {
        background-color: #f8f9fa;
        font-family: "Arial", sans-serif;
      }

      .navbar-brand {
        font-weight: bold;
        font-size: 1.5rem;
      }

      .bg-primary-red {
        background-color: var(--primary-red) !important;
      }

      .text-primary-red {
        color: var(--primary-red) !important;
      }

      .btn-primary-red {
        background-color: var(--primary-red);
        border-color: var(--primary-red);
        color: white;
      }

      .btn-primary-red:hover {
        background-color: var(--dark-red);
        border-color: var(--dark-red);
      }

      .card {
        border: none;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s;
      }

      .card:hover {
        transform: translateY(-2px);
      }

      .stats-card {
        background: linear-gradient(
          135deg,
          var(--primary-red),
          var(--dark-red)
        );
        color: white;
      }

      .low-stock {
        background-color: #fff3cd;
        border-left: 4px solid #ffc107;
      }

      .out-of-stock {
        background-color: #f8d7da;
        border-left: 4px solid var(--primary-red);
      }

      .table-hover tbody tr:hover {
        background-color: var(--light-red);
      }

      .badge-low {
        background-color: #ffc107;
      }

      .badge-out {
        background-color: var(--primary-red);
      }

      .badge-good {
        background-color: #28a745;
      }

      .search-box {
        border-radius: 25px;
      }

      .action-buttons .btn {
        margin: 0 2px;
      }

      @media (max-width: 768px) {
        .table-responsive {
          font-size: 0.875rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg bg-primary-red text-white">
      <div class="container">
        <a class="navbar-brand text-white" href="#">
          <i class="fas fa-utensils me-2"></i>
          JM Zorilla Noodle Factory
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link text-white" href="#"
                ><i class="fas fa-home me-1"></i>Dashboard</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link text-white active" href="#"
                ><i class="fas fa-boxes me-1"></i>Inventory</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" href="#"
                ><i class="fas fa-chart-bar me-1"></i>Reports</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="container mt-4">
      <!-- Header -->
      <div class="row mb-4">
        <div class="col">
          <h2 class="text-primary-red">
            <i class="fas fa-warehouse me-2"></i>
            Inventory Management System
          </h2>
          <p class="text-muted">
            Track and manage your noodle factory inventory
          </p>
        </div>
      </div>

      <!-- Statistics Cards -->
      <div class="row mb-4">
        <div class="col-md-3 mb-3">
          <div class="card stats-card">
            <div class="card-body text-center">
              <i class="fas fa-boxes fa-2x mb-2"></i>
              <h4 id="totalItems">0</h4>
              <p class="mb-0">Total Items</p>
            </div>
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="card stats-card">
            <div class="card-body text-center">
              <i class="fas fa-exclamation-triangle fa-2x mb-2"></i>
              <h4 id="lowStockItems">0</h4>
              <p class="mb-0">Low Stock</p>
            </div>
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="card stats-card">
            <div class="card-body text-center">
              <i class="fas fa-times-circle fa-2x mb-2"></i>
              <h4 id="outOfStockItems">0</h4>
              <p class="mb-0">Out of Stock</p>
            </div>
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="card stats-card">
            <div class="card-body text-center">
              <i class="fas fa-dollar-sign fa-2x mb-2"></i>
              <h4 id="totalValue">₱0</h4>
              <p class="mb-0">Total Value</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Controls -->
      <div class="row mb-4">
        <div class="col-md-6">
          <div class="input-group">
            <span class="input-group-text"><i class="fas fa-search"></i></span>
            <input
              type="text"
              class="form-control search-box"
              id="searchInput"
              placeholder="Search inventory items..."
            />
          </div>
        </div>
        <div class="col-md-6 text-end">
          <button
            class="btn btn-primary-red"
            data-bs-toggle="modal"
            data-bs-target="#addItemModal"
          >
            <i class="fas fa-plus me-1"></i>Add New Item
          </button>
          <button class="btn btn-outline-secondary ms-2" onclick="exportData()">
            <i class="fas fa-download me-1"></i>Export
          </button>
        </div>
      </div>

      <!-- Inventory Table -->
      <div class="card">
        <div class="card-header bg-light">
          <h5 class="mb-0 text-primary-red">
            <i class="fas fa-list me-2"></i>Inventory List
          </h5>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover mb-0">
              <thead class="table-light">
                <tr>
                  <th>Item Code</th>
                  <th>Product Name</th>
                  <th>Category</th>
                  <th>Current Stock</th>
                  <th>Min. Stock</th>
                  <th>Unit Price</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="inventoryTableBody">
                <!-- Dynamic content will be inserted here -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Add Item Modal -->
    <div class="modal fade" id="addItemModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-primary-red text-white">
            <h5 class="modal-title">Add New Inventory Item</h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <form id="addItemForm">
              <div class="mb-3">
                <label class="form-label">Item Code</label>
                <input
                  type="text"
                  class="form-control"
                  id="itemCode"
                  required
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Product Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="productName"
                  required
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Category</label>
                <select class="form-select" id="category" required>
                  <option value="">Select Category</option>
                  <option value="Raw Materials">Raw Materials</option>
                  <option value="Finished Goods">Finished Goods</option>
                  <option value="Packaging">Packaging</option>
                  <option value="Seasonings">Seasonings</option>
                </select>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <label class="form-label">Current Stock</label>
                  <input
                    type="number"
                    class="form-control"
                    id="currentStock"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Minimum Stock</label>
                  <input
                    type="number"
                    class="form-control"
                    id="minStock"
                    required
                  />
                </div>
              </div>
              <div class="mb-3 mt-3">
                <label class="form-label">Unit Price (₱)</label>
                <input
                  type="number"
                  step="0.01"
                  class="form-control"
                  id="unitPrice"
                  required
                />
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancel
            </button>
            <button
              type="button"
              class="btn btn-primary-red"
              onclick="addItem()"
            >
              Add Item
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Edit Item Modal -->
    <div class="modal fade" id="editItemModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-primary-red text-white">
            <h5 class="modal-title">Edit Inventory Item</h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <form id="editItemForm">
              <input type="hidden" id="editIndex" />
              <div class="mb-3">
                <label class="form-label">Item Code</label>
                <input
                  type="text"
                  class="form-control"
                  id="editItemCode"
                  required
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Product Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="editProductName"
                  required
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Category</label>
                <select class="form-select" id="editCategory" required>
                  <option value="Raw Materials">Raw Materials</option>
                  <option value="Finished Goods">Finished Goods</option>
                  <option value="Packaging">Packaging</option>
                  <option value="Seasonings">Seasonings</option>
                </select>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <label class="form-label">Current Stock</label>
                  <input
                    type="number"
                    class="form-control"
                    id="editCurrentStock"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Minimum Stock</label>
                  <input
                    type="number"
                    class="form-control"
                    id="editMinStock"
                    required
                  />
                </div>
              </div>
              <div class="mb-3 mt-3">
                <label class="form-label">Unit Price (₱)</label>
                <input
                  type="number"
                  step="0.01"
                  class="form-control"
                  id="editUnitPrice"
                  required
                />
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancel
            </button>
            <button
              type="button"
              class="btn btn-primary-red"
              onclick="updateItem()"
            >
              Update Item
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
      // Inventory data storage
      let inventory = [
        {
          itemCode: "NOD001",
          productName: "Wheat Flour",
          category: "Raw Materials",
          currentStock: 150,
          minStock: 50,
          unitPrice: 45.0,
        },
        {
          itemCode: "NOD002",
          productName: "Instant Noodles - Chicken",
          category: "Finished Goods",
          currentStock: 25,
          minStock: 100,
          unitPrice: 12.5,
        },
        {
          itemCode: "NOD003",
          productName: "Packaging Cups",
          category: "Packaging",
          currentStock: 0,
          minStock: 200,
          unitPrice: 2.3,
        },
        {
          itemCode: "NOD004",
          productName: "Chicken Seasoning",
          category: "Seasonings",
          currentStock: 80,
          minStock: 30,
          unitPrice: 85.0,
        },
        {
          itemCode: "NOD005",
          productName: "Instant Noodles - Beef",
          category: "Finished Goods",
          currentStock: 120,
          minStock: 100,
          unitPrice: 13.0,
        },
      ];

      // Initialize the page
      document.addEventListener("DOMContentLoaded", function () {
        updateInventoryTable();
        updateStatistics();

        // Search functionality
        document
          .getElementById("searchInput")
          .addEventListener("input", function () {
            filterInventory(this.value);
          });
      });

      // Update inventory table
      function updateInventoryTable(data = inventory) {
        const tbody = document.getElementById("inventoryTableBody");
        tbody.innerHTML = "";

        data.forEach((item, index) => {
          const status = getStockStatus(item);
          const statusBadge = getStatusBadge(status);
          const rowClass =
            status === "Out of Stock"
              ? "out-of-stock"
              : status === "Low Stock"
              ? "low-stock"
              : "";

          tbody.innerHTML += `
                    <tr class="${rowClass}">
                        <td><strong>${item.itemCode}</strong></td>
                        <td>${item.productName}</td>
                        <td>${item.category}</td>
                        <td>${item.currentStock}</td>
                        <td>${item.minStock}</td>
                        <td>₱${item.unitPrice.toFixed(2)}</td>
                        <td>${statusBadge}</td>
                        <td class="action-buttons">
                            <button class="btn btn-sm btn-outline-primary" onclick="editItem(${index})" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-danger" onclick="deleteItem(${index})" title="Delete">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                `;
        });
      }

      // Get stock status
      function getStockStatus(item) {
        if (item.currentStock === 0) return "Out of Stock";
        if (item.currentStock <= item.minStock) return "Low Stock";
        return "In Stock";
      }

      // Get status badge
      function getStatusBadge(status) {
        const badges = {
          "Out of Stock": '<span class="badge badge-out">Out of Stock</span>',
          "Low Stock": '<span class="badge badge-low">Low Stock</span>',
          "In Stock": '<span class="badge badge-good">In Stock</span>',
        };
        return badges[status];
      }

      // Update statistics
      function updateStatistics() {
        const total = inventory.length;
        const lowStock = inventory.filter(
          (item) => item.currentStock <= item.minStock && item.currentStock > 0
        ).length;
        const outOfStock = inventory.filter(
          (item) => item.currentStock === 0
        ).length;
        const totalValue = inventory.reduce(
          (sum, item) => sum + item.currentStock * item.unitPrice,
          0
        );

        document.getElementById("totalItems").textContent = total;
        document.getElementById("lowStockItems").textContent = lowStock;
        document.getElementById("outOfStockItems").textContent = outOfStock;
        document.getElementById(
          "totalValue"
        ).textContent = `₱${totalValue.toLocaleString("en-PH", {
          minimumFractionDigits: 2,
        })}`;
      }

      // Filter inventory
      function filterInventory(searchTerm) {
        const filtered = inventory.filter(
          (item) =>
            item.itemCode.toLowerCase().includes(searchTerm.toLowerCase()) ||
            item.productName.toLowerCase().includes(searchTerm.toLowerCase()) ||
            item.category.toLowerCase().includes(searchTerm.toLowerCase())
        );
        updateInventoryTable(filtered);
      }

      // Add new item
      function addItem() {
        const form = document.getElementById("addItemForm");
        if (!form.checkValidity()) {
          form.reportValidity();
          return;
        }

        const newItem = {
          itemCode: document.getElementById("itemCode").value,
          productName: document.getElementById("productName").value,
          category: document.getElementById("category").value,
          currentStock: parseInt(document.getElementById("currentStock").value),
          minStock: parseInt(document.getElementById("minStock").value),
          unitPrice: parseFloat(document.getElementById("unitPrice").value),
        };

        inventory.push(newItem);
        updateInventoryTable();
        updateStatistics();

        // Reset form and close modal
        form.reset();
        const modal = bootstrap.Modal.getInstance(
          document.getElementById("addItemModal")
        );
        modal.hide();
      }

      // Edit item
      function editItem(index) {
        const item = inventory[index];
        document.getElementById("editIndex").value = index;
        document.getElementById("editItemCode").value = item.itemCode;
        document.getElementById("editProductName").value = item.productName;
        document.getElementById("editCategory").value = item.category;
        document.getElementById("editCurrentStock").value = item.currentStock;
        document.getElementById("editMinStock").value = item.minStock;
        document.getElementById("editUnitPrice").value = item.unitPrice;

        const modal = new bootstrap.Modal(
          document.getElementById("editItemModal")
        );
        modal.show();
      }

      // Update item
      function updateItem() {
        const form = document.getElementById("editItemForm");
        if (!form.checkValidity()) {
          form.reportValidity();
          return;
        }

        const index = parseInt(document.getElementById("editIndex").value);
        inventory[index] = {
          itemCode: document.getElementById("editItemCode").value,
          productName: document.getElementById("editProductName").value,
          category: document.getElementById("editCategory").value,
          currentStock: parseInt(
            document.getElementById("editCurrentStock").value
          ),
          minStock: parseInt(document.getElementById("editMinStock").value),
          unitPrice: parseFloat(document.getElementById("editUnitPrice").value),
        };

        updateInventoryTable();
        updateStatistics();

        const modal = bootstrap.Modal.getInstance(
          document.getElementById("editItemModal")
        );
        modal.hide();
      }

      // Delete item
      function deleteItem(index) {
        if (confirm("Are you sure you want to delete this item?")) {
          inventory.splice(index, 1);
          updateInventoryTable();
          updateStatistics();
        }
      }

      // Export data
      function exportData() {
        const csvContent =
          "data:text/csv;charset=utf-8," +
          "Item Code,Product Name,Category,Current Stock,Min Stock,Unit Price,Status\n" +
          inventory
            .map(
              (item) =>
                `${item.itemCode},${item.productName},${item.category},${
                  item.currentStock
                },${item.minStock},${item.unitPrice},${getStockStatus(item)}`
            )
            .join("\n");

        const encodedUri = encodeURI(csvContent);
        const link = document.createElement("a");
        link.setAttribute("href", encodedUri);
        link.setAttribute("download", "inventory_report.csv");
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      }
    </script>
  </body>
</html>
